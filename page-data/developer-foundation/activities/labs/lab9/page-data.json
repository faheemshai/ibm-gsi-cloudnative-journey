{"componentChunkName":"component---src-pages-developer-foundation-activities-labs-lab-9-index-mdx","path":"/developer-foundation/activities/labs/lab9/","result":{"pageContext":{"frontmatter":{"title":"Kubernetes Lab 9 - Network Policies"},"relativePagePath":"/developer-foundation/activities/labs/lab9/index.mdx","titleType":"page","MdxNode":{"id":"ec32f074-9ef7-5603-8026-deb6756f92d4","children":[],"parent":"3c625b87-198a-54f0-b7da-218ef1b4498b","internal":{"content":"---\ntitle: Kubernetes Lab 9 - Network Policies\n---\n\n## Problem\n\nSetup minikube\n\n```\nminikube start --network-plugin=cni\nkubectl apply -f https://docs.projectcalico.org/v3.9/manifests/calico.yaml\nkubectl -n kube-system set env daemonset/calico-node FELIX_IGNORELOOSERPF=true\nkubectl -n kube-system get pods | grep calico-node\n```\n\nCreate secured pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-secure-pod\n  labels:\n    app: secure-app\nspec:\n  containers:\n  - name: nginx\n    image: bitnami/nginx\n    ports:\n    - containerPort: 8080\n```\n\nCreate client pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-client-pod\nspec:\n  containers:\n  - name: busybox\n    image: radial/busyboxplus:curl\n    command: [\"/bin/sh\", \"-c\", \"while true; do sleep 3600; done\"]\n```\n\nCreate a policy to allow only client pods with label `allow-access: \"true\"` to access secure pod\n ","type":"Mdx","contentDigest":"0b907813b3d80e5f60dcba1adefc995f","owner":"gatsby-plugin-mdx","counter":1047},"frontmatter":{"title":"Kubernetes Lab 9 - Network Policies"},"exports":{},"rawBody":"---\ntitle: Kubernetes Lab 9 - Network Policies\n---\n\n## Problem\n\nSetup minikube\n\n```\nminikube start --network-plugin=cni\nkubectl apply -f https://docs.projectcalico.org/v3.9/manifests/calico.yaml\nkubectl -n kube-system set env daemonset/calico-node FELIX_IGNORELOOSERPF=true\nkubectl -n kube-system get pods | grep calico-node\n```\n\nCreate secured pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-secure-pod\n  labels:\n    app: secure-app\nspec:\n  containers:\n  - name: nginx\n    image: bitnami/nginx\n    ports:\n    - containerPort: 8080\n```\n\nCreate client pod\n```yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: network-policy-client-pod\nspec:\n  containers:\n  - name: busybox\n    image: radial/busyboxplus:curl\n    command: [\"/bin/sh\", \"-c\", \"while true; do sleep 3600; done\"]\n```\n\nCreate a policy to allow only client pods with label `allow-access: \"true\"` to access secure pod\n ","fileAbsolutePath":"/home/runner/work/ibm-gsi-cloudnative-journey/ibm-gsi-cloudnative-journey/src/pages/developer-foundation/activities/labs/lab9/index.mdx"}}},"staticQueryHashes":["1054721580","1054721580","1364590287","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","3273249464","768070550"]}