{"componentChunkName":"component---src-pages-developer-foundation-activities-labs-lab-6-index-mdx","path":"/developer-foundation/activities/labs/lab6/","result":{"pageContext":{"frontmatter":{"title":"Kubernetes Lab 6 - Rolling Updates"},"relativePagePath":"/developer-foundation/activities/labs/lab6/index.mdx","titleType":"page","MdxNode":{"id":"53a9e3e4-aafb-5e7d-9758-638c0e6fdaf3","children":[],"parent":"94009748-163a-55ae-8273-8d8bdb0cfb61","internal":{"content":"---\ntitle: Kubernetes Lab 6 - Rolling Updates\n---\n\n## Problem\n\nYour company's developers have just finished developing a new version of their jedi-themed mobile game. They are ready to update the backend services that are running in your Kubernetes cluster. There is a deployment in the cluster managing the replicas for this application. The deployment is called `jedi-deployment`. You have been asked to update the image for the container named `jedi-ws` in this deployment template to a new version, `bitnami/nginx:1.18.0`.\n\nAfter you have updated the image using a rolling update, check on the status of the update to make sure it is working. If it is not working, perform a rollback to the previous state.\n\n## Solution\n\n### Setup environment\n\n- Execute the command to create the deployement using below definition.\n\n ```shell script\n  oc apply -f jedi-deployment.yaml -n {DEV_NAMESPACE}\n  ```\n\n ```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: jedi-deployment\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: jedi-deployment\n  template:\n    metadata:\n      labels:\n        app: jedi-deployment\n    spec:\n      containers:\n        - image: bitnami/nginx:1.16.1\n          name: jedi-ws\n ```\n### Rolling Updates \n\n- Update the deployment to the new version like so:\n\n  ```\n   oc set image deployment/jedi-deployment jedi-ws=bitnami/nginx:1.18.0 --record \n   ```\n- Check the progress of the rolling update.\n\n  ```\n   oc rollout status deployment/jedi-deployment\n   ```\n\n-  Get the Pods details in another terminal window.\n\n  ```\n   oc get pods -w\n   ```\n\n- Get a list of previous deployement revisions.\n\n  ```\n   oc rollout history deployment/jedi-deployment\n   ```\n\n- Undo the last revision.\n\n  ```\n   oc rollout undo deployment/jedi-deployment\n   ```\n\n- Check the status of the rollout.\n\n  ```\n   oc rollout status deployment/jedi-deployment\n   ```","type":"Mdx","contentDigest":"ad17e06ae23ed47f5220eb3275156659","owner":"gatsby-plugin-mdx","counter":1096},"frontmatter":{"title":"Kubernetes Lab 6 - Rolling Updates"},"exports":{},"rawBody":"---\ntitle: Kubernetes Lab 6 - Rolling Updates\n---\n\n## Problem\n\nYour company's developers have just finished developing a new version of their jedi-themed mobile game. They are ready to update the backend services that are running in your Kubernetes cluster. There is a deployment in the cluster managing the replicas for this application. The deployment is called `jedi-deployment`. You have been asked to update the image for the container named `jedi-ws` in this deployment template to a new version, `bitnami/nginx:1.18.0`.\n\nAfter you have updated the image using a rolling update, check on the status of the update to make sure it is working. If it is not working, perform a rollback to the previous state.\n\n## Solution\n\n### Setup environment\n\n- Execute the command to create the deployement using below definition.\n\n ```shell script\n  oc apply -f jedi-deployment.yaml -n {DEV_NAMESPACE}\n  ```\n\n ```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: jedi-deployment\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: jedi-deployment\n  template:\n    metadata:\n      labels:\n        app: jedi-deployment\n    spec:\n      containers:\n        - image: bitnami/nginx:1.16.1\n          name: jedi-ws\n ```\n### Rolling Updates \n\n- Update the deployment to the new version like so:\n\n  ```\n   oc set image deployment/jedi-deployment jedi-ws=bitnami/nginx:1.18.0 --record \n   ```\n- Check the progress of the rolling update.\n\n  ```\n   oc rollout status deployment/jedi-deployment\n   ```\n\n-  Get the Pods details in another terminal window.\n\n  ```\n   oc get pods -w\n   ```\n\n- Get a list of previous deployement revisions.\n\n  ```\n   oc rollout history deployment/jedi-deployment\n   ```\n\n- Undo the last revision.\n\n  ```\n   oc rollout undo deployment/jedi-deployment\n   ```\n\n- Check the status of the rollout.\n\n  ```\n   oc rollout status deployment/jedi-deployment\n   ```","fileAbsolutePath":"/workspace/ibm-gsi-cloudnative-journey/src/pages/developer-foundation/activities/labs/lab6/index.mdx"}}},"staticQueryHashes":["1054721580","1054721580","1364590287","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","3273249464","768070550"]}